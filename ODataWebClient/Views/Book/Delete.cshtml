@model ODataAPI.Models.EDM.Book

<h2>Delete Book</h2>

<p>Are you sure you want to delete this book?</p>

<div>
    <strong>@Model.Title</strong> by @Model.Author
</div>

<button id="deleteBtn">Delete</button>
<a href="/Book">Cancel</a>

<script>
    document.getElementById('deleteBtn').addEventListener('click', async function () {
        const bookId = @Model.Id;

        try {
            const response = await fetch(`http://localhost:5297/odata/Books(${bookId})`, {
                method: 'DELETE'
            });

            if (response.ok) {
                window.location.href = '/Book';
            } else {
                alert('Failed to delete book');
            }
        } catch (error) {
            console.error('Error:', error);
        }
    });
</script>
